CREATE TABLE users
(
    user_id      SERIAL UNIQUE PRIMARY KEY NOT NULL,
    name         VARCHAR(100)              NOT NULL,
    username     VARCHAR(100) UNIQUE       NOT NULL,
    password     VARCHAR(100)              NOT NULL,
    date_created DATE                      NOT NULL
);

CREATE TABLE producers
(
    producer_id SERIAL UNIQUE NOT NULL,
    CONSTRAINT producer_id PRIMARY KEY (user_id)
) INHERITS (users);

CREATE TABLE production_companies
(
    production_company_id SERIAL UNIQUE NOT NULL,
    CONSTRAINT production_company_id PRIMARY KEY (user_id)
) INHERITS (users);

CREATE TABLE administrators
(
    administrator_id SERIAL UNIQUE NOT NULL,
    CONSTRAINT administrator_id PRIMARY KEY (user_id)
) INHERITS (users);

CREATE TABLE productions
(
    production_id SERIAL UNIQUE PRIMARY KEY NOT NULL,
    title         VARCHAR(100)              NOT NULL,
    deadline      DATE                      NOT NULL,
    status        SMALLINT                  NOT NULL
);

CREATE TABLE roles
(
    role_id    SERIAL UNIQUE PRIMARY KEY NOT NULL,
    role_title VARCHAR(100) UNIQUE       NOT NULL
);

CREATE TABLE credits
(
    credit_id  SERIAL UNIQUE PRIMARY KEY               NOT NULL,
    name       VARCHAR(100)                            NOT NULL,
    role_title INTEGER REFERENCES roles (role_id) NOT NULL,
    created_by INTEGER REFERENCES users (user_id)
);

CREATE TABLE company_producer_subscriptions
(
    producer_id           INTEGER REFERENCES producers (producer_id)                      NOT NULL,
    production_company_id INTEGER REFERENCES production_companies (production_company_id) NOT NULL,
    PRIMARY KEY (producer_id, production_company_id)
);

CREATE TABLE company_production_subscriptions
(
    production_id         INTEGER REFERENCES productions (production_id)                  NOT NULL,
    production_company_id INTEGER REFERENCES production_companies (production_company_id) NOT NULL,
    PRIMARY KEY (production_id, production_company_id)
);

INSERT INTO producers (name, username, password, date_created)
VALUES ('Steffen', '123', '1234', NOW());

INSERT INTO producers (name, username, password, date_created)
VALUES ('JÃ¸rgen', '123', '1234', NOW());

INSERT INTO producers (name, username, password, date_created)
VALUES ('Morgens', '123', '1234', NOW());

INSERT INTO production_companies (name, username, password, date_created)
VALUES ('lars', '123', '1234', NOW());

INSERT INTO production_companies (name, username, password, date_created)
VALUES ('Karen', '123', '1234', NOW());

INSERT INTO administrators (name, username, password, date_created)
VALUES ('Maren', '123', '1234', NOW());

INSERT INTO company_producer_subscriptions (producer_id, production_company_id)
VALUES ('1', '1');

SELECT *
FROM producers;

SELECT *
FROM users;

SELECT *
FROM production_companies;

SELECT *
FROM administrators;

SELECT *
FROM company_producer_subscriptions;


DROP TABLE company_producer_subscriptions;
DROP TABLE credits;
DROP TABLE productions;
DROP TABLE producers;
DROP TABLE production_companies;
DROP TABLE administrators;
DROP TABLE users;